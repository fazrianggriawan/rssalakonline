<div class="container-fluid">
    <div class="row p-2">
        <div class="col"></div>
        <div class="col-8">
            <p-calendar [(ngModel)]="tglKunjungan" dateFormat="dd-mm-yy" (onSelect)="getJadwalDokter()"></p-calendar>
            &nbsp;
            <p-dropdown [options]="dataPoli" [(ngModel)]="selectedPoli" optionLabel="ket" placeholder="Pilih Poli" (onChange)="getJadwalDokter()"></p-dropdown>
            &nbsp;
            <p-dropdown [options]="dataJadwalPraktek" [(ngModel)]="selectedJadwal" placeholder="Pilih Jadwal Dokter" (onChange)="getAntrian()">
                <ng-template pTemplate="selectedItem">
                    <div>({{selectedJadwal.jadwal}}) {{selectedJadwal.namadokter}} </div>
                </ng-template>
                <ng-template let-item pTemplate="item">
                    <div>({{item.jadwal}}) {{item.namadokter}} </div>
                </ng-template>
            </p-dropdown>
        </div>
        <div class="col"></div>
    </div>
    <div class="row p-2">
        <div class="col"></div>
        <div class="col m-2 shadow border rounded thumbnail text-center p-3">
            <div>No. Antrian</div>
            <h1>{{lastCall.prefix_antrian}}-{{lastCall.no_antrian}}</h1>
            <!-- <button class="btn btn-sm btn-secondary">Recall</button> -->
            <div *ngIf="lastCall.prefix_antrian">
                <button class="btn btn-sm btn-primary" (click)="updateWaktuAntrian(5)" title="akhir waktu layan poli/mulai waktu tunggu farmasi">Task 5</button>&nbsp;
                <button class="btn btn-sm btn-primary" (click)="updateWaktuAntrian(6)" title="akhir waktu tunggu farmasi/mulai waktu layan farmasi membuat obat">Task 6</button>&nbsp;
                <button class="btn btn-sm btn-primary" (click)="updateWaktuAntrian(7)" title="akhir waktu obat selesai dibuat">Task 7</button>&nbsp;
                <button class="btn btn-sm btn-primary" (click)="updateWaktuAntrian(99)" title="tidak hadir/batal">Task 99</button>&nbsp;
            </div>
        </div>
        <div class="col m-2 shadow border rounded thumbnail text-center p-3" style="background-color: #ccdaff; color: #4e5d83; cursor: pointer;" (click)="callNext()">
            <h5 class="pt-2">CALL NEXT</h5>
            <div class="pt-1">No. Antrian :</div>
            <div style="font-size: 1rem; padding-top: 5px;">{{nextCall}}</div>
            <div><i>Update Waktu : Task 4</i></div>
        </div>
        <div class="col"></div>
    </div>
    <div class="row p-2">
        <div class="col"></div>
        <div class="col-8">
            <p-table [value]="dataAntrian" dataKey="id" responsiveLayout="scroll">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Kode Booking</th>
                        <th>No. Antrian</th>
                        <th>Poliklinik</th>
                        <th>Update Waktu Antrian</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-item>
                    <tr>
                        <td>{{item.booking_code}}</td>
                        <td>{{item.prefix_antrian}}-{{item.no_antrian}}</td>
                        <td>{{item.nama_poli}}</td>
                        <td>
                            <button class="btn btn-sm btn-primary" (click)="updateWaktuAntrian(1)" title="mulai waktu tunggu admisi">Task 1</button>&nbsp;
                            <button class="btn btn-sm btn-primary" (click)="updateWaktuAntrian(2)" title="akhir waktu tunggu admisi/mulai waktu layan admisi">Task 2</button>&nbsp;
                            <button class="btn btn-sm btn-primary" (click)="updateWaktuAntrian(3)" title="akhir waktu layan admisi/mulai waktu tunggu poli">Task 3</button>&nbsp;
                        </td>
                    </tr>
                </ng-template>
            </p-table>
            <div *ngIf="dataAntrian.length == 0" class="text-center alert">Tidak Ada Data Antrian Saat Ini.</div>
        </div>
        <div class="col"></div>
    </div>
</div>