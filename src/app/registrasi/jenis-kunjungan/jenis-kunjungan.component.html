<div class="container-fluid p-3">
    <div class="row justify-content-center">
        <div class="col-lg-4 col-md-7 col-sm-12">
            <div class="text-center">
                <img src="assets/logo.png" height="62px">
                <h4>RS SALAK BOGOR</h4>
            </div>

            <div class="border p-5 bg-gray-100 mt-4" style="background-color: #f4f5f8; border-radius: 15px;">
                <h5 align="center" class="mb-4">Registrasi Online<br>Rawat Jalan</h5>
                <hr>
                <div>
                    <small class="text-muted">Data Pasien</small>
                    <div class="bold">{{pasien.nama | uppercase}}</div>
                    <div>
                        {{pasien.kelamin}}
                    </div>
                    <div>{{pasien.alamat}}</div>
                    <hr>
                    <div class="row">
                        <div class="col">
                            <small class="text-muted">No. Rekam Medis</small>
                            <div>{{pasien.norekmed}}</div>
                        </div>
                        <div class="col">
                            <small class="text-muted">No. BPJS</small>
                            <div>{{pasien.noaskes}}</div>
                        </div>
                    </div>
                </div>
                <div class="mt-3">
                    <div class="mb-3">
                        <label for="Jenis Kunjungan" class="text-muted">Jenis Pembayaran</label>
                        <select [(ngModel)]="jnsPembayaran" class="form-select" aria-label="Default select example">
                            <option value="bpjs">BPJS</option>
                        </select>
                    </div>
                    <div class="mb-3" hidden>
                        <label for="Jenis Kunjungan" class="text-muted">Jenis Kunjungan</label>
                        <select [(ngModel)]="jnsKunjungan" class="form-select" aria-label="Default select example">
                            <option value="rujukanBaru">Kunjungan / Rujukan Baru</option>
                            <option value="kontrolKembali">Kontrol Kembali</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="Jenis Kunjungan" class="text-muted">Surat Rujukan</label>
                        <div class="p-3 bg-light rounded border mb-3 clickable" *ngIf="rujukan" >
                            <div class="row">
                                <div class="col-12">
                                    <small class="text-muted">No. Rujukan : </small>
                                    <strong>{{rujukan.noKunjungan}}</strong>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-12 col-md-6">
                                    <small class="text-muted">Asal Rujukan</small>
                                    <div><span>{{rujukan.provPerujuk.nama}}</span></div>
                                </div>
                                <div class="col-sm-12 col-md-6">
                                    <small class="text-muted">Tgl. Rujukan</small>
                                    <div><span>{{registrasiOnlineService.dateHuman(rujukan.tglKunjungan)}}</span></div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12 col-md-6">
                                    <small class="text-muted">Jns. Perawatan</small>
                                    <div><span>{{rujukan.pelayanan.nama | uppercase}}</span></div>
                                </div>
                                <div class="col-sm-12 col-md-6">
                                    <small class="text-muted">Poliklinik Tujuan</small>
                                    <div><span>{{rujukan.poliRujukan.nama}}</span></div>
                                </div>
                            </div>
                            <div class="row mt-1">
                                <div class="col-12">
                                    <div class="bg-secondary bg-opacity-10 p-2 rounded">
                                        <small class="text-muted">Diagnosa</small>
                                    <div><span>{{rujukan.diagnosa.kode}} - {{rujukan.diagnosa.nama}}</span></div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-muted text-center mt-1 mb-1"><small>Rujukan ini sudah terpakai sebanyak : <b>{{jumlahSepRujukan}}x</b></small></div>
                            <div class="text-muted text-center alert alert-success p-1" style="line-height: 1.2rem;" *ngIf="rujukan.hariExpired > 0">
                                <small>Masa berlaku rujukan sampai <br/> {{registrasiOnlineService.dateHuman(rujukan.expired)}} <strong>({{rujukan.hariExpired}} hari lagi)</strong></small>
                            </div>
                            <div class="text-muted text-center alert alert-danger p-1" style="line-height: 1.2rem;" *ngIf="rujukan.hariExpired < 0">
                                <small>Masa berlaku rujukan sudah <br> habis sejak : <strong>{{registrasiOnlineService.dateHuman(rujukan.expired)}}</strong></small>
                            </div>
                            <div class="d-grid gap-2 mt-3">
                                <button *ngIf="rujukan" class="btn btn-secondary" type="button" (click)="dialogDataRujukan=true">Ganti Rujukan</button>
                            </div>
                        </div>
                        <div class="d-grid gap-2 mb-3" *ngIf="!rujukan">
                            <button class="btn btn-outline-primary pt-3 pb-3" type="button" (click)="dialogDataRujukan=true">Pilih Surat Rujukan</button>
                        </div>
                        <div class="d-grid gap-2 mb-4 mt-4">
                            <button [disabled]="!rujukan" class="btn btn-primary" type="button" (click)="next()">Lanjutkan</button>
                        </div>
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-sm btn-outline-secondary" [routerLink]="'/'"> <i class="bi bi-chevron-left"></i> Kembali</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div style="position: fixed; bottom: 0; width: 100%; left: 0; z-index: -1;">
    <svg width="100%" height="100%" id="svg" viewBox="0 0 1440 600" xmlns="http://www.w3.org/2000/svg" class="transition duration-300 ease-in-out delay-150"><defs><linearGradient id="gradient" x1="0%" y1="51%" x2="100%" y2="49%"><stop offset="5%" stop-color="#ff690088"></stop><stop offset="95%" stop-color="#00d08488"></stop></linearGradient></defs><path d="M 0,600 C 0,600 0,200 0,200 C 126.64114832535887,231.5311004784689 253.28229665071774,263.0622009569378 341,240 C 428.71770334928226,216.9377990430622 477.51196172248797,139.2822966507177 568,143 C 658.488038277512,146.7177033492823 790.66985645933,231.80861244019138 896,244 C 1001.33014354067,256.1913875598086 1079.8086124401914,195.48325358851676 1166,176 C 1252.1913875598086,156.51674641148324 1346.0956937799042,178.25837320574163 1440,200 C 1440,200 1440,600 1440,600 Z" stroke="none" stroke-width="0" fill="url(#gradient)" class="transition-all duration-300 ease-in-out delay-150 path-0"></path><defs><linearGradient id="gradient" x1="0%" y1="51%" x2="100%" y2="49%"><stop offset="5%" stop-color="#ff6900ff"></stop><stop offset="95%" stop-color="#00d084ff"></stop></linearGradient></defs><path d="M 0,600 C 0,600 0,400 0,400 C 67.75119617224877,435.07177033492826 135.50239234449754,470.14354066985646 235,468 C 334.49760765550246,465.85645933014354 465.7416267942584,426.49760765550246 575,391 C 684.2583732057416,355.50239234449754 771.5311004784689,323.86602870813397 860,345 C 948.4688995215311,366.13397129186603 1038.1339712918661,440.0382775119617 1135,458 C 1231.8660287081339,475.9617224880383 1335.933014354067,437.98086124401914 1440,400 C 1440,400 1440,600 1440,600 Z" stroke="none" stroke-width="0" fill="url(#gradient)" class="transition-all duration-300 ease-in-out delay-150 path-1"></path></svg>
</div>

<p-dialog header="Pilih Surat Rujukan" [(visible)]="dialogDataRujukan" [modal]="true" [position]="'top'" [transitionOptions]="'250ms'">
    <div class="p-3 item-rujukan bg-light rounded border mb-3 clickable" pRipple *ngFor="let item of dataRujukan" (click)="selectRujukan(item)" >
        <div class="row">
            <div class="col-12">
                <small class="text-muted">No. Rujukan : </small>
                <strong>{{item.noKunjungan}}</strong>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-sm-12 col-md-6">
                <small class="text-muted">Asal Rujukan</small>
                <div><span>{{item.provPerujuk.nama}}</span></div>
            </div>
            <div class="col-sm-12 col-md-6">
                <small class="text-muted">Tgl. Rujukan</small>
                <div><span>{{item.tglKunjungan}}</span></div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12 col-md-6">
                <small class="text-muted">Jns. Perawatan</small>
                <div><span>{{item.pelayanan.nama | uppercase}}</span></div>
            </div>
            <div class="col-sm-12 col-md-6">
                <small class="text-muted">Poliklinik Tujuan</small>
                <div><span>{{item.poliRujukan.nama}}</span></div>
            </div>
        </div>
        <div class="row mt-1">
            <div class="col-12">
                <div class="bg-secondary bg-opacity-10 p-2 rounded">
                    <small class="text-muted">Diagnosa</small>
                <div><span>{{item.diagnosa.kode}} - {{item.diagnosa.nama}}</span></div>
                </div>
            </div>
        </div>
    </div>
</p-dialog>

<app-error-handle></app-error-handle>