<p-sidebar
    [(visible)]="panelStatus"
    [fullScreen]="true"
    [showCloseIcon]="false"
    [modal]="false"
    (onShow)="ngAfterViewInit()"
    (onHide)="destroyKeyboard()"
    styleClass="dialog-booking-code">

    <div class="row">
        <div class="col text-end pe-4 fs-1"><i class="bi bi-x-lg clickable" (click)="panelStatus=false"></i></div>
    </div>

    <div class="row justify-content-center pb-5" *ngIf="!booking.booking_code" @fade>
        <div class="col-10 text-center">
            <h1 class="display-4 mb-3" style="text-shadow: 1px 1px 2px rgb(65, 65, 65);">KODE BOOKING</h1>
            <input type="text" style="text-transform: uppercase; background: #327652;
            color: #ffdc2f;
            border-color: #5f9b7a;" (input)="onInputChange($event)" #search (blur)="onBlur()" (keydown)="listenKey($event)" class="input" [(ngModel)]="value" value={{value}} class="form-control p-2 fs-1 text-center">
            <p class="fs-5" style="color: #21583b;">Scan QR Code / Input Keyboard</p>
            <div class="pt-2">
                <div class="simple-keyboard"></div>
            </div>
        </div>
        <div class="col-10 pt-3 text-end">
            <hr>
            <button class="btn btn-warning fs-2 p-5 shadow pt-2 pb-2 btn-next" (click)="getKodeBooking()" pRipple>NEXT <i class="bi bi-chevron-right"></i></button>
        </div>
    </div>

    <div class="row justify-content-center pb-5" *ngIf="booking.booking_code" @fade>
        <h1 class="display-4 mb-3 text-center" style="text-shadow: 1px 1px 2px rgb(65, 65, 65);">DATA BOOKING</h1>
        <div class="row mb-4 justify-content-center">
            <div class="col-8 m-2 p-5 btn-selection-dokter rounded" style="line-height: normal;">
                <div class="row">
                    <div class="col-8">
                        <div class="fs-4 bold">{{selected.rujukan.peserta.nama | uppercase}}</div>
                        <div class="fs-5 grey">
                            <span *ngIf="selected.rujukan.peserta.sex == 'L'">LAKI-LAKI</span>
                            <span *ngIf="selected.rujukan.peserta.sex == 'P'">PEREMPUAN</span>,
                            {{selected.rujukan.peserta.tglLahir}}
                        </div>
                    </div>
                    <div class="col">
                        <div class="grey">Kode Booking</div>
                        <div class="fs-4 bold">{{booking.booking_code | uppercase}}</div>
                    </div>
                </div>
                <hr>
                <div class="row fs-5">
                    <div class="col">
                        <div>
                            <div class="grey">No. Antrian</div>
                            <div class="bold">{{booking.prefix_antrian}}-{{booking.no_antrian}}</div>
                        </div>
                        <div class="mt-3">
                            <div class="grey">Jenis Pasien</div>
                            <div class="bold">{{selected.rujukan.peserta.jenisPeserta.keterangan | uppercase}}</div>
                        </div>
                        <div class="mt-3">
                            <div class="grey">Tanggal Kunjungan</div>
                            <div class="bold">{{booking.tgl_kunjungan | uppercase}}</div>
                        </div>
                    </div>
                    <div class="col">
                        <div>
                            <div class="grey">Poliklinik</div>
                            <div class="bold">{{selected.poli.ket}}</div>
                        </div>
                        <div class="mt-3">
                            <div class="grey">Dokter</div>
                            <div class="bold">{{this.selected.dokter.nama_dokter}}</div>
                        </div>
                        <div class="mt-3">
                            <div class="grey">Jadwal Praktek</div>
                            <div class="bold">{{booking.jam_praktek}}</div>
                        </div>
                    </div>
                    <div class="col">
                        <div>
                            <div class="grey">Jenis Kunjungan</div>
                            <div class="bold">KONTROL KEMBALI</div>
                        </div>
                        <div class="mt-3">
                            <div class="grey">Nomor Rujukan</div>
                            <div class="bold">{{selected.rujukan.noKunjungan}}</div>
                        </div>
                        <div class="mt-3">
                            <div class="grey">Nomor Surat Kontrol</div>
                            <div class="bold">{{booking.no_surat_kontrol}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class="row p-4 justify-content-center">
            <div class="col-5 pt-3 text-start">
                <button class="btn btn-secondary fs-2 p-5 shadow pt-2 pb-2" pRipple (click)="ngAfterViewInit()"><i class="bi bi-chevron-left"></i> BACK</button>
            </div>
            <div class="col-5 pt-3 text-end">
                <button class="btn btn-warning fs-2 p-5 shadow pt-2 pb-2 btn-next" pRipple>NEXT <i class="bi bi-chevron-right"></i></button>
            </div>
        </div>
    </div>

    <div class="hidden" *ngIf="data.jadwal.length==0">
        <h1 class="display-4 mb-3 text-center" style="text-shadow: 1px 1px 2px rgb(65, 65, 65);">PILIH POLIKLINIK</h1>
        <div class="row p-4 justify-content-center">
            <div class="col-2 m-2 p-0 clickable bg-white shadow border rounded btn-selection" (click)="getJadwal(item.kode)" pRipple *ngFor="let item of data.poli">
                <h3 class="p-4 pb-0 m-0">{{item.ket | uppercase}}</h3>
                <p class="ps-4 pe-4 pt-1 pb-1 m-0" style="background-color: rgba(0, 0, 0, 0.1);">Lihat Jadwal Praktek <i class="bi bi-chevron-right"></i></p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-10 pt-3 text-start">
                <hr>
                <button class="btn btn-secondary fs-4 p-5 shadow pt-2 pb-2" (click)="data.jadwal=[]" pRipple><i class="bi bi-chevron-left"></i> BACK</button>
            </div>
        </div>
    </div>

    <div class="hidden" *ngIf="data.jadwal.length>0">
        <h1 class="display-4 mb-3 text-center" style="text-shadow: 1px 1px 2px rgb(65, 65, 65);">PILIH JADWAL DOKTER</h1>
        <div class="row" *ngIf="data.jadwal.length > 0">
            <div class="col" style="background-color: rgba(0, 0, 0, 0.1);">
                <p class="text-center fs-5 p-3 m-0">HARI INI - POLIKLINIK {{data.jadwal[0].namapoli}}.</p>
            </div>
        </div>
        <div class="row p-4 justify-content-center">
            <div class="col-3 m-2 p-0 clickable bg-white shadow border rounded btn-selection-dokter" pRipple *ngFor="let item of data.jadwal">
                <div class="row">
                    <div class="col-4 p-1">
                        <img width="100%" src="https://st.depositphotos.com/1771835/1477/i/600/depositphotos_14779771-stock-photo-portrait-of-confident-young-doctor.jpg" alt="Dokter">
                    </div>
                    <div class="col">
                        <div class="fs-5 p-3">{{item.namadokter}}</div>
                        <div class="p-3 pt-0 pb-0">{{item.jadwal}}</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-9 pt-3 text-start">
                <hr>
                <button class="btn btn-secondary fs-4 p-5 shadow pt-2 pb-2" (click)="data.jadwal=[]" pRipple><i class="bi bi-chevron-left"></i> BACK</button>
            </div>
        </div>
    </div>
</p-sidebar>